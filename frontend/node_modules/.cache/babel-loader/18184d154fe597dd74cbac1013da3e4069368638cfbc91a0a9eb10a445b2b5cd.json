{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[busqueda,setBusqueda]=useState(\"\");const[peliculas,setPeliculas]=useState([]);const[peliculasFiltradas,setPeliculasFiltradas]=useState([]);const[recomendacion,setRecomendacion]=useState(\"\");const[modoDescripcion,setModoDescripcion]=useState(false);useEffect(()=>{fetch('/api/peliculas').then(res=>res.json()).then(data=>{setPeliculas(data);setPeliculasFiltradas(data);}).catch(err=>console.error('Error al obtener películas:',err));},[]);const handleBuscar=e=>{e.preventDefault();const texto=busqueda.toLowerCase();const resultado=peliculas.filter(p=>p.titulo.toLowerCase().includes(texto)||p.genero.toLowerCase().includes(texto)||p.titulo.toLowerCase().startsWith(texto));setPeliculasFiltradas(resultado);setRecomendacion(\"\");};const handleBuscarPorDescripcion=async()=>{try{const res=await fetch('/api/recomendaciones',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:`Dame una recomendación basada en esta descripción: ${busqueda}. Usa solo películas de este catálogo: ${peliculas.map(p=>p.titulo).join(', ')}.`})});const data=await res.json();setRecomendacion(data.recomendacion);const seleccionadas=peliculas.filter(p=>data.recomendacion.toLowerCase().includes(p.titulo.toLowerCase()));if(seleccionadas.length>0){setPeliculasFiltradas(seleccionadas);}}catch(err){console.error('Error con IA:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"titulo\",children:\"CECYFLIX\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"buscador\",onSubmit:handleBuscar,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:modoDescripcion?'Describe la peli que buscas...':'Busca por título o género',value:busqueda,onChange:e=>setBusqueda(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:modoDescripcion,children:\"Buscar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-ia\",onClick:()=>{setModoDescripcion(true);handleBuscarPorDescripcion();},disabled:!busqueda.trim(),children:\"Buscar por descripci\\xF3n\"}),modoDescripcion&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setModoDescripcion(false);setRecomendacion('');setPeliculasFiltradas(peliculas);},children:\"Volver a b\\xFAsqueda normal\"})]}),recomendacion&&/*#__PURE__*/_jsxs(\"div\",{className:\"bloque-recomendaciones\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"IA sugiere:\"}),/*#__PURE__*/_jsx(\"p\",{children:recomendacion})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:peliculasFiltradas.map((p,i)=>{var _p$descripcion;return/*#__PURE__*/_jsxs(\"div\",{className:\"tarjeta\",children:[/*#__PURE__*/_jsx(\"img\",{src:p.poster,alt:p.titulo}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:p.titulo}),/*#__PURE__*/_jsx(\"p\",{children:p.genero}),/*#__PURE__*/_jsxs(\"span\",{children:[(_p$descripcion=p.descripcion)===null||_p$descripcion===void 0?void 0:_p$descripcion.slice(0,60),\"...\"]})]})]},i);})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","busqueda","setBusqueda","peliculas","setPeliculas","peliculasFiltradas","setPeliculasFiltradas","recomendacion","setRecomendacion","modoDescripcion","setModoDescripcion","fetch","then","res","json","data","catch","err","console","error","handleBuscar","e","preventDefault","texto","toLowerCase","resultado","filter","p","titulo","includes","genero","startsWith","handleBuscarPorDescripcion","method","headers","body","JSON","stringify","prompt","map","join","seleccionadas","length","className","children","onSubmit","type","placeholder","value","onChange","target","disabled","onClick","trim","i","_p$descripcion","src","poster","alt","descripcion","slice"],"sources":["C:/Users/gisel/Downloads/practica4_1/recomendaciones-ia/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  const [busqueda, setBusqueda] = useState(\"\");\n  const [peliculas, setPeliculas] = useState([]);\n  const [peliculasFiltradas, setPeliculasFiltradas] = useState([]);\n  const [recomendacion, setRecomendacion] = useState(\"\");\n  const [modoDescripcion, setModoDescripcion] = useState(false);\n\n  useEffect(() => {\n    fetch('/api/peliculas')\n      .then(res => res.json())\n      .then(data => {\n        setPeliculas(data);\n        setPeliculasFiltradas(data);\n      })\n      .catch(err => console.error('Error al obtener películas:', err));\n  }, []);\n\n  const handleBuscar = (e) => {\n    e.preventDefault();\n    const texto = busqueda.toLowerCase();\n    const resultado = peliculas.filter(p =>\n      p.titulo.toLowerCase().includes(texto) ||\n      p.genero.toLowerCase().includes(texto) ||\n      p.titulo.toLowerCase().startsWith(texto)\n    );\n    setPeliculasFiltradas(resultado);\n    setRecomendacion(\"\");\n  };\n\n  const handleBuscarPorDescripcion = async () => {\n    try {\n      const res = await fetch('/api/recomendaciones', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          prompt: `Dame una recomendación basada en esta descripción: ${busqueda}. Usa solo películas de este catálogo: ${peliculas.map(p => p.titulo).join(', ')}.`\n        })\n      });\n      const data = await res.json();\n      setRecomendacion(data.recomendacion);\n      const seleccionadas = peliculas.filter(p =>\n        data.recomendacion.toLowerCase().includes(p.titulo.toLowerCase())\n      );\n      if (seleccionadas.length > 0) {\n        setPeliculasFiltradas(seleccionadas);\n      }\n    } catch (err) {\n      console.error('Error con IA:', err);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"titulo\">CECYFLIX</h1>\n\n      <form className=\"buscador\" onSubmit={handleBuscar}>\n        <input\n          type=\"text\"\n          placeholder={modoDescripcion ? 'Describe la peli que buscas...' : 'Busca por título o género'}\n          value={busqueda}\n          onChange={e => setBusqueda(e.target.value)}\n        />\n        <button type=\"submit\" disabled={modoDescripcion}>Buscar</button>\n        <button\n          type=\"button\"\n          className=\"btn-ia\"\n          onClick={() => {\n            setModoDescripcion(true);\n            handleBuscarPorDescripcion();\n          }}\n          disabled={!busqueda.trim()}\n        >\n          Buscar por descripción\n        </button>\n        {modoDescripcion && (\n          <button\n            type=\"button\"\n            onClick={() => {\n              setModoDescripcion(false);\n              setRecomendacion('');\n              setPeliculasFiltradas(peliculas);\n            }}\n          >\n            Volver a búsqueda normal\n          </button>\n        )}\n      </form>\n\n      {recomendacion && (\n        <div className=\"bloque-recomendaciones\">\n          <h2>IA sugiere:</h2>\n          <p>{recomendacion}</p>\n        </div>\n      )}\n\n      <div className=\"grid\">\n        {peliculasFiltradas.map((p, i) => (\n          <div className=\"tarjeta\" key={i}>\n            <img src={p.poster} alt={p.titulo} />\n            <div className=\"info\">\n              <h3>{p.titulo}</h3>\n              <p>{p.genero}</p>\n              <span>{p.descripcion?.slice(0, 60)}...</span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}